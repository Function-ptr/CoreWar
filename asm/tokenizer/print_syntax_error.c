/*
** EPITECH PROJECT, 2023
** print_syntax_error.c
** File description:
** print syntax error
*/
/*
 _____               __      __
|  __ \              \ \    / /
| |__) |  __ _  ___   \ \  / /   ___   __ _   __ _  _ __
|  ___/  / _` |/ __|   \ \/ /   / _ \ / _` | / _` || '_ \
| |     | (_| |\__ \    \  /   |  __/| (_| || (_| || | | |
|_|      \__,_||___/     \/     \___| \__, | \__,_||_| |_|
                                       __/ |
                                      |___/
*/

#include "tokenizer.h"
#include "my.h"
#include "asm.h"

void my_put_nbr_err(int n)
{
    int buffer = 0;
    if (n <= -2147483648) {
        n = n + 1;
        buffer = 1;
    }
    if (n < 0) {
        nwwrite(2, "-", 1);
        n = -n;
    }
    if (n >= 10) {
        my_put_nbr_do(n / 10);
    }
    char c = (char)(n % 10 + 48 + buffer);
    nwwrite(2, &c, 1);
}

void print_syntax_error(char array input, uint16_t line_nb)
{
    char ptr end = input;

    while (*end && *end != '\n')
        end++;
    nwwrite(2, "\033[1m\033[38;5;8mLine ", 19);
    (void)my_put_nbr_err(line_nb);
    nwwrite(2, ": \033[38;5;9mError: Invalid syntax\033[0m\n", 38);
    nwwrite(2, input, (size_t) (end - input));
    nwwrite(2, "\n", 1);
}

void print_instruction_error(char array input, uint16_t line_nb)
{
    char ptr end = input;
    for (; *end && *end != '\n'; ++end);
    nwwrite(2, "\033[1m\033[38;5;8mLine ", 19);
    (void)my_put_nbr_err(line_nb);
    nwwrite(2, ": \033[38;5;9mError: Invalid instruction\033[0m\n", 43);
    nwwrite(2, input, (size_t) (end - input));
    nwwrite(2, "\n", 1);
}

void print_syntax_error_header(char *value)
{
    nwwrite(2, "\033[1;31mError: \033[97m", 20);
    nwwrite(2, value, (size_t)my_strlen(value));
    nwwrite(2, " syntax error.\n\033[0m", 20);
}

/*
─▄▀▀▀▀▄─█──█────▄▀▀█─▄▀▀▀▀▄─█▀▀▄
─█────█─█──█────█────█────█─█──█
─█────█─█▀▀█────█─▄▄─█────█─█──█
─▀▄▄▄▄▀─█──█────▀▄▄█─▀▄▄▄▄▀─█▄▄▀

─────────▄██████▀▀▀▀▀▀▄
─────▄█████████▄───────▀▀▄▄
──▄█████████████───────────▀▀▄
▄██████████████─▄▀───▀▄─▀▄▄▄──▀▄
███████████████──▄▀─▀▄▄▄▄▄▄────█
█████████████████▀█──▄█▄▄▄──────█
███████████──█▀█──▀▄─█─█─█───────█
████████████████───▀█─▀██▄▄──────█
█████████████████──▄─▀█▄─────▄───█
█████████████████▀███▀▀─▀▄────█──█
████████████████──────────█──▄▀──█
████████████████▄▀▀▀▀▀▀▄──█──────█
████████████████▀▀▀▀▀▀▀▄──█──────█
▀████████████████▀▀▀▀▀▀──────────█
──███████████████▀▀─────█──────▄▀
──▀█████████████────────█────▄▀
────▀████████████▄───▄▄█▀─▄█▀
──────▀████████████▀▀▀──▄███
──────████████████████████─█
─────████████████████████──█
────████████████████████───█
────██████████████████─────█
────██████████████████─────█
────██████████████████─────█
────██████████████████─────█
────██████████████████▄▄▄▄▄█

─────────────█─────█─█──█─█───█
─────────────█─────█─█──█─▀█─█▀
─────────────█─▄█▄─█─█▀▀█──▀█▀
─────────────██▀─▀██─█──█───█
*/
